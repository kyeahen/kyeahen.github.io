---
title: '[BOJ] 17141 ì—°êµ¬ì†Œ2'
categories:
  - Algorithm
tags:
  - Java
  - BFS
  - BOJ

comments: true 
---
### BFS ì˜ˆì œ

## ë¬¸ì œ
<a href = "https://www.acmicpc.net/problem/17141"> https://www.acmicpc.net/problem/17141 </a>
<br/>

## ë¬¸ì œ í’€ì´

``` java
package Baekjoon.Graph.Search;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.LinkedList;
import java.util.Queue;
import java.util.StringTokenizer;

/**
 * Created by kyeahen.
 * Title : 17141 ì—°êµ¬ì†Œ2
 * Category : ì™„ì „íƒìƒ‰, bfs
 * Date: 2021/04/09
 */
public class BJ_17141 {

    static class Point {
        int x;
        int y;

        Point(int x, int y) {
            this.x = x;
            this.y = y;
        }
    }

    static int N, M;
    static int[][] map;
    static boolean[] visited;

    static int[] dx = {1, -1, 0, 0};
    static int[] dy = {0, 0, 1, -1};

    static ArrayList<Point> virus = new ArrayList<>();
    static int ans = Integer.MAX_VALUE;

    static int count = 0; //ë¹ˆì¹¸ ê°œìˆ˜

    public static void main(String[] args) throws IOException {
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        StringTokenizer st = new StringTokenizer(br.readLine());

        N = Integer.parseInt(st.nextToken()); //ì—°êµ¬ì†Œ í¬ê¸°
        M = Integer.parseInt(st.nextToken()); //ë†“ì„ ìˆ˜ ìˆëŠ” ë°”ì´ëŸ¬ìŠ¤ì˜ ê°œìˆ˜

        map = new int[N][N];

        for (int i = 0; i < N; i++) {
            st = new StringTokenizer(br.readLine());
            for (int j = 0; j < N; j++) {
                map[i][j] = Integer.parseInt(st.nextToken());
            }
        }

        for (int i = 0; i < N; i++) {
            for (int j = 0; j < N; j++) {

                if (map[i][j] == 2) { //ë°”ì´ëŸ¬ìŠ¤ë¥¼ ë†“ì„ ìˆ˜ ìˆëŠ” ì¹¸
                    virus.add(new Point(i, j));
                }

                if (map[i][j] == 0) { //ë¹ˆì¹¸
                    count++;
                }
            }
        }

        /*
        ë¹ˆì¹¸ì€ ë°”ì´ëŸ¬ìŠ¤ê°€ í¼ì§ˆ ìˆ˜ ìˆëŠ” ê³µê°„ì„ ì˜ë¯¸
        (ë°”ì´ëŸ¬ìŠ¤ë¥¼ ë†“ì„ ìˆ˜ ìˆëŠ” ì¹¸ - ë†“ì„ ìˆ˜ ìˆëŠ” ë°”ì´ëŸ¬ìŠ¤ì˜ ê°œìˆ˜)ëŠ” ë°”ì´ëŸ¬ìŠ¤ë¥¼ ë†“ì§€ ëª»í•´ì„œ ë‚¨ì€ ìë¦¬ì´ê¸°ì—
        ë¹ˆì¹¸ê³¼ ê°™ë‹¤. ê·¸ë ‡ê¸°ì— í•´ë‹¹ ê°œìˆ˜ë§Œí¼ countë¥¼ ì¦ê°€ì‹œì¼œì¤€ë‹¤.
         */

        count += virus.size() - M;
        visited = new boolean[virus.size()]; //ë°”ì´ëŸ¬ìŠ¤ ì²´í¬ ë°°ì—´

        if (count == 0) { //ë¹ˆì¹¸ì´ ì—†ìœ¼ë©´ ë°”ì´ëŸ¬ìŠ¤ëŠ” í¼ì§ˆ ìˆ˜ ì—†ìŒ.
            ans = 0;
        }
        else {
            comb(0, 0);
        }

        // "ë°”ì´ëŸ¬ìŠ¤ë¥¼ ì–´ë–»ê²Œ ë†“ì•„ë„ ëª¨ë“  ë¹ˆ ì¹¸ì— ë°”ì´ëŸ¬ìŠ¤ë¥¼ í¼ëœ¨ë¦´ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ëŠ” -1ì„ ì¶œë ¥í•œë‹¤."
        if (ans == Integer.MAX_VALUE) {
            System.out.println(-1);
        } else {
            System.out.println(ans);
        }

    }

    //ì¡°í•© (depth = ë°”ì´ëŸ¬ìŠ¤ ì„ íƒ ê°œìˆ˜, start = ë°”ì´ëŸ¬ìŠ¤ index)
    public static void comb(int depth, int start) {

        if (depth == M) { //ë°”ì´ëŸ¬ìŠ¤ Mê°œ ì„ íƒ ì™„ë£Œ
            int[][] copyMap = copy();
            spreadVirus(copyMap, count);
            return;
        }

        //ë°”ì´ëŸ¬ìŠ¤ ì„ íƒ
        for (int i = start; i < virus.size(); i++) {
            visited[i] = true;
            comb(depth + 1, i + 1);
            visited[i] = false; //ë°±íŠ¸ë˜í‚¹
        }
    }

    //ë°”ì´ëŸ¬ìŠ¤ í¼ëœ¨ë¦¬ê¸°
    public static void spreadVirus(int[][] map, int cnt) {
        Queue<Point> q = new LinkedList<>();

        for (int i = 0; i < virus.size(); i++) {

            if (visited[i]) { //ì„ íƒí•œ ë°”ì´ëŸ¬ìŠ¤ë¥¼ íì— ì‚½ì…
                q.offer(virus.get(i));
            }
        }

        int time = 0; //ë°”ì´ëŸ¬ìŠ¤ê°€ í¼ì§€ëŠ” ì‹œê°„
        while (!q.isEmpty()) {
            if (ans <= time) { break; } // í•´ë‹¹ ì¡°í•©ì€ ì´ì „ ì¡°í•©ë³´ë‹¤ ëŠë¦¬ê¸° ë•Œë¬¸ì— ìµœì†Œ ì‹œê°„ì´ ì•„ë‹˜

            int len = q.size();
            for (int v = 0; v < len; v++) { // ì‹œì‘ ì§€ì (ë°”ì´ëŸ¬ìŠ¤)ì´ ì—¬ëŸ¬ ê°œì´ê¸° ë•Œë¬¸ì— ë°˜ë³µë¬¸ìœ¼ë¡œ í•œë²ˆ ë” ê°ì‹¼ë‹¤.
                Point p = q.poll();

                for (int i = 0; i < 4; i++) {
                    int nx = dx[i] + p.x;
                    int ny = dy[i] + p.y;

                    if (0 <= nx && nx < N && 0 <= ny && ny < N) {

                        //ë¹ˆì¹¸ì´ ì•„ë‹ˆë©´ ê±´ë„ˆë›°ê¸° (ë°”ì´ëŸ¬ìŠ¤ - 2, ë²½ - 1)
                        if (map[nx][ny] != 0) { continue; }

                        //ë°”ì´ëŸ¬ìŠ¤ í¼ëœ¨ë¦¬ê¸°
                        map[nx][ny] = 2;
                        q.offer(new Point(nx, ny));
                        cnt--; //ë¹ˆì¹¸ ê°œìˆ˜ ì°¨ê°
                    }
                }
            }
            time++; //ì‹œê°„ ì¦ê°€

            if (cnt == 0) { //ë” ì´ìƒ ë¹ˆì¹¸ì´ ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ íƒìƒ‰ ì¢…ë£Œ
                ans = time;
                return;
            }

        }
    }

    public static int[][] copy() {
        int[][] temp = new int[N][N]; //map ë³µì‚¬

        //ë§µ ëª¨ë‘ ì´ˆê¸°í™”í•´ì¤€ í›„ì— ì„ íƒëœ ë°”ì´ëŸ¬ìŠ¤ë§Œ ë‹¤ì‹œ í‘œì‹œí•´ì£¼ê¸°
        for (int i = 0; i < N; i++) {
            for (int j = 0; j < N; j++) {

                if (map[i][j] == 2) { //ë°”ì´ëŸ¬ìŠ¤ë¥¼ ë†“ì„ ìˆ˜ ìˆëŠ” ì¹¸ì„ 0ìœ¼ë¡œ ì´ˆê¸°í™”
                    temp[i][j] = 0;
                } else { //ë¹ˆì¹¸, ë²½
                    temp[i][j] = map[i][j];
                }
            }
        }

        for (int i = 0; i < virus.size(); i++) {
            if (visited[i]) { //ì„ íƒëœ ë°”ì´ëŸ¬ìŠ¤ë¥¼ 2ë¡œ í‘œê¸°
                Point v = virus.get(i);
                temp[v.x][v.y] = 2;
            }
        }

        return temp;
    }
}
```

## TMI

**21/04/14: ì•Œê³ ë¦¬ì¦˜ ìŠ¤í„°ë”” ë¬¸ì œ í’€ì´ğŸ¤“**
